# FeResourceVersionEditor

python3实现的前端资源文件(js/css)版本号修改器

github: https://github.com/Copterfly/FeResourceVersionEditor

## 缘起

## 介绍

本软件可批量修改前端资源文件(css/js)的版本号。

本软件诞生初衷为提高前端工作效率，防止手动修改出错，解放生产力。

本软件只适用于64位 windows 操作系统，32位应该打不开。

本软件只适用于微收客项目，请勿用在其它项目上。

本软件为绿色软件，无毒无害，解压即可使用。

本软件 console(CMD) 版本诞生于 2016-1-18，GUI 版本发布于 2018-1-19。

-- Powered By Copterfly

## 工作原理

在修改资源文件前，给所有资源文件生成快照，修改文件后，运行本软件，检测被修改过的文件，到模板文件目录中查找其路径，匹配并替换版本号为当前时间。

更新版本号后，会自动或可手动重新生成快照，如此循环。

## 软件使用说明

### 设置

软件的其它操作需要先正确设置 web根目录 项。如果你不先设置，执行其它操作也会被软件带回此页面。

请确保输入的是：微收客项目路径下的web根目录。

**配图等补充**


### 生成资源文件快照

在你开始修改资源文件前且没有 git 冲突的文件时执行此操作。

或者在你拉取更新后执行此操作，因为如果其他同事提交了新增的资源文件的话，也要给它们生成快照，以防某次你也要修改这些文件。

**配图等补充**


### 批量更新版本号

提交前，点击【按钮1】，会在【区域2】中列出被修改过的资源文件。（js和css的背景色不同以示区分）

点击【区域2】中的某一个文件以选中/不选它，或者点击【按钮3】进行全选或全不选。

点击【按钮4】，会自动在引用它的模板文件中更新所选资源文件的版本号。（会自动跳到【更新记录页】显示执行结果）

点击【按钮5】，把所选资源文件设为非修改状态。主要用处：你修改了不少资源文件未提交，然后拉取了其他同事修改的资源文件，你就可以在这里把这些别人修改过的文件设为非修改状态，即排除掉。

**配图等补充**


### 更新记录

这里显示的是上次(如果有的话)或本次的更新记录。

可以看到被修改的模板文件和具体内容：【区域1】

如果某个模板文件匹配资源文件出错，会在【区域2】看到详细出错信息，以便查找错误。

**配图等补充**


### 分支切换问题

最理想的情况是在分支1（或主干）没有需要提交和修改版本号的资源文件，然后切换到分支2，再打开本软件【生成全部资源文件快照】，其它操作就跟上面的教程一样了。

如果在分支1有需要提交和修改版本号的资源文件，但是又不得不切换到分支2去修改别的文件，有两种情况：

1. 修改的资源文件比较少
如果分支1需要提交和修改版本号的资源文件比较少，比如说三几个，那么可以直接切换到分支2，打开本软件【生成全部资源文件快照】，修改完成，批量更新完版本号并提交后；

切换回到分支1，打开本软件【生成全部资源文件快照】，再打开 git 的提交窗口，那么之前的三几个资源文件就列出来了，对照着编辑每一个文件，比如说在文件后面加多一个空格或者一个空行，这样后，分支1需要提交和修改版本号的资源文件又回到之前的待修改状态了。

2. 修改的资源文件比较多
点击【按钮1】，打开资源文件快照所在目录；

**配图等补充**

复制一份【resource_list.txt】命名为【备份1.txt】；

**配图等补充**

切换到分支2，打开本软件【生成全部资源文件快照】，修改完成，批量更新完版本号并提交后；

切换回到分支1，把【备份1.txt】的内容全部复制到【resource_list.txt】，删除【备份1.txt】，这样后，分支1需要提交和修改版本号的资源文件又回到之前的待修改状态了。

(完)
